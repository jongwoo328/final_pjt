{% extends 'base.html' %}
{% load bootstrap4 %}
{% load bootstrap_pagination %}

{% block title %}Community{% endblock %}

{% block context %}
<div class="container mt-5">
    <div class="w3-bar w3-dark-gray mb-3">
        <a href="{% url 'community:community' %}" class="w3-bar-item w3-button w3-mobile text-decoration-none">전체게시판</a>
        {% for board in boards %}
            <a href="{% url 'community:board' board.url_name %}" class="w3-bar-item w3-button w3-mobile text-decoration-none">{{ board.name }}</a>
            
        {% endfor%}
    </div>
    <div class="d-flex justify-content-between p-1"> 
        <h5>
            <!-- <a href="{%url 'community:community' %}" class="text-dark"><i class="fas fa-angle-double-left"></i></a> -->
            <!-- <a href="{%url 'community:community' %}" class="text-dark">커뮤니티</a> -->
            {% if now_board %}
            <i class="fas"> {{ now_board.name }} </i>
            {% else %}
            <i class="fas"> 전체 게시판 </i>
            {% endif %}
        </h5>
        <div class="align-self-center">
            <h5>
                <!-- <i class="fas fa-search"> | </i> -->
            {% if now_board %}
            <a href="{% url 'community:create_article' now_board.url_name %}" class="text-dark"><i class="fas fa-edit"></i></a></h5>
            {% else %}
            <a href="{% url 'community:create_article_noboard' %}" class="text-dark"><i class="fas fa-edit"></i></a></h5>
            {% endif %}
        </div>
        
    </div>
    
    <div class="container mt-0 p-1">
        <hr class="my-2">
        <div class="row" >
            <div class="col-6 text-center">제목</div>
            <div class="col-2 text-center">작성자</div>
            <div class="col-2 text-center">조회 수</div>
            <div class="col-2 text-center">작성일</div>
        </div>
        <hr class="my-2">
        <tbody>
            {% for article in page_obj %}
                <div class="row">
                    <div class="col-6">
                        <a href="{% url 'community:detail' article.pk %}" class="text-dark">{{article.title}}</a>
                    </div>
                    <div class="col-2">{{ article.author }}</div>
                    <div class="col-2 text-center">{{ article.hits }}</div>
                    <div class="col-2 text-center">
                        <!-- 오늘 날짜면 시간만 / 아니면 날짜 출력 -->
                        {% if article.created_at|date:"Y-m-d" == nowDate %}
                            {{ article.created_at | date:"H:i" }}
                        {% else %}
                            {{ article.created_at | date:"Y-m-d" }}
                        {% endif %}
                    </div>
                </div>
                <hr class="my-2">
                
            {% endfor %}
        </tbody>
    </div>
    
    <!-- pagination -->
    <div class="d-flex justify-content-center">
    {% bootstrap_paginate page_obj range=10 show_prev_next="false" show_first_last="true" %}
    </div>
</div>
{% endblock %}